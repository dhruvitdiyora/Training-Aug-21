<div class="container">
    <h1 class="text-center my-3">Assignment Day 4-5</h1>
    <div class="border border-3 mt-5 p-3 content">
        <h2 class="text-center mb-4">Student admission Form</h2>
        <form [formGroup]="admissionForm" class="content" (ngSubmit)="onSubmit()">
            <!-- Student Details -->
            <h4 class="mt-3">Student Details:</h4>
            <div class="row">
                <div class="col-xl-4">
                    <label for="FirstName">First Name</label><br />
                    <input id="FirstName" class="form-control" type="text" formControlName="FirstName" />
                    <div class="alert alert-danger" *ngIf="
              admissionForm.get('FirstName')?.hasError('required') &&
              admissionForm.get('FirstName')?.touched
            ">
                        First Name is required
                    </div>
                    <br />
                </div>
                <div class="col-xl-4">
                    <label for="MiddleName">Middle Name</label><br />
                    <input id="MiddleName" class="form-control" type="text" formControlName="MiddleName" />
                    <div class="alert alert-danger" *ngIf="
              admissionForm.get('MiddleName')?.hasError('required') &&
              admissionForm.get('MiddleName')?.touched
            ">
                        Middle Name is required
                    </div>
                    <br />
                </div>
                <div class="col-xl-4">
                    <label for="LastName">Last Name</label><br />
                    <input id="LastName" class="form-control" type="text" formControlName="LastName" />
                    <div class="alert alert-danger" *ngIf="
              admissionForm.get('LastName')?.hasError('required') &&
              admissionForm.get('LastName')?.touched
            ">
                        Last Name is required
                    </div>
                    <br />
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                    <label for="Dob">Date of Birth</label><br />
                    <input id="Dob" class="form-control" type="date" formControlName="Dob" />
                    <div class="alert alert-danger" *ngIf="
              admissionForm.get('Dob')?.hasError('required') &&
              admissionForm.get('Dob')?.touched
            ">
                        Date of Birth is required
                    </div>
                    <br />
                </div>
                <div class="col-xl-4">
                    <label for="PlaceOfBirth">Place of Birth</label><br />
                    <input id="PlaceOfBirth" class="form-control" type="text" formControlName="PlaceOfBirth" />
                    <div class="alert alert-danger" *ngIf="
              admissionForm.get('PlaceOfBirth')?.hasError('required') &&
              admissionForm.get('PlaceOfBirth')?.touched
            ">
                        place of Birth is required
                    </div>
                    <br />
                </div>
                <div class="col-xl-4">
                    <label for="FirstLanguage">First Language</label><br />
                    <input id="FirstLanguage" class="form-control" type="text" formControlName="FirstLanguage" />
                    <div class="alert alert-danger" *ngIf="
              admissionForm.get('FirstLanguage')?.hasError('required') &&
              admissionForm.get('FirstLanguage')?.touched
            ">
                        First Language is required
                    </div>
                    <br />
                </div>
            </div>

            <!-- Address Details -->
            <div formGroupName="Address" class="mt-3">
                <h4>Address:</h4>
                <div class="row">
                    <div class="col-xl-3">
                        <label for="City">City</label><br />
                        <input id="City" class="form-control" type="text" formControlName="City" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm.get('Address.City')?.hasError('required') &&
                admissionForm.get('Address.City')?.touched
              ">
                            City is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-3">
                        <label for="State">State</label><br />
                        <input id="State" class="form-control" type="text" formControlName="State" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm.get('Address.State')?.hasError('required') &&
                admissionForm.get('Address.State')?.touched
              ">
                            State is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-3">
                        <label for="Country">Country</label><br />
                        <input id="Country" class="form-control" type="text" formControlName="Country" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm.get('Address.Country')?.hasError('required') &&
                admissionForm.get('Address.Country')?.touched
              ">
                            Country is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-3">
                        <label for="Pin">Pincode</label><br />
                        <input id="Pin" class="form-control" type="number" formControlName="Pin" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm.get('Address.Pin')?.hasError('required') &&
                admissionForm.get('Address.Pin')?.touched
              ">
                            Pincode is required
                        </div>
                        <br />
                    </div>
                </div>
            </div>

            <!-- Father Details -->
            <div formGroupName="Father" class="mt-3">
                <h4>Father's Details:</h4>
                <div class="row">
                    <div class="col-xl-4">
                        <label for="FFirstName">First Name</label><br />
                        <input id="FFirstName" class="form-control" type="text" formControlName="FFirstName" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Father.FFirstName')
                  ?.hasError('required') &&
                admissionForm.get('Father.FFirstName')?.touched
              ">
                            Father's First Name is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-4">
                        <label for="FMiddleName">Middle Name</label><br />
                        <input id="FMiddleName" class="form-control" type="text" formControlName="FMiddleName" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Father.FMiddleName')
                  ?.hasError('required') &&
                admissionForm.get('Father.FMiddleName')?.touched
              ">
                            Father's Middle Name is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-4">
                        <label for="FLastName">Last Name</label><br />
                        <input id="FLastName" class="form-control" type="text" formControlName="FLastName" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Father.FLastName')
                  ?.hasError('required') &&
                admissionForm.get('Father.FLastName')?.touched
              ">
                            Father's Last Name is required
                        </div>
                        <br />
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-4">
                        <label for="FEmail">Email</label><br />
                        <input id="FEmail" class="form-control" type="email" formControlName="FEmail" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm.get('Father.FEmail')?.hasError('required') &&
                admissionForm.get('Father.FEmail')?.touched
              ">
                            Father's Email is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-4">
                        <label for="FQualification">Education Qualification</label><br />
                        <input id="FQualification" class="form-control" type="text" formControlName="FQualification" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Father.FQualification')
                  ?.hasError('required') &&
                admissionForm.get('Father.FQualification')
                  ?.touched
              ">
                            Father's Education Qualification is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-4">
                        <label for="FProfession">Profession</label><br />
                        <input id="FProfession" class="form-control" type="text" formControlName="FProfession" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Father.FProfession')
                  ?.hasError('required') &&
                admissionForm.get('Father.FProfession')?.touched
              ">
                            Father's Profession is required
                        </div>
                        <br />
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-6">
                        <label for="FDesignation">Designation</label><br />
                        <input id="FDesignation" class="form-control" type="text" formControlName="FDesignation" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Father.FDesignation')
                  ?.hasError('required') &&
                admissionForm.get('Father.FDesignation')?.touched
              ">
                            Father's Designation is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-6">
                        <label for="FPhone">Phone Number</label><br />
                        <input id="FPhone" class="form-control" type="number" formControlName="FPhone" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm.get('Father.FPhone')?.hasError('required') &&
                admissionForm.get('Father.FPhone')?.touched
              ">
                            Father's Phone is required
                        </div>
                        <br />
                    </div>
                </div>
            </div>

            <!-- Mother Details -->
            <div formGroupName="Mother" class="mt-3">
                <h4>Mother's Details:</h4>
                <div class="row">
                    <div class="col-xl-4">
                        <label for="MFirstName">First Name</label><br />
                        <input id="MFirstName" class="form-control" type="text" formControlName="MFirstName" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Mother.MFirstName')
                  ?.hasError('required') &&
                admissionForm.get('Mother.MFirstName')?.touched
              ">
                            Mother's First Name is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-4">
                        <label for="MMiddleName">Middle Name</label><br />
                        <input id="MMiddleName" class="form-control" type="text" formControlName="MMiddleName" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Mother.MMiddleName')
                  ?.hasError('required') &&
                admissionForm.get('Mother.MMiddleName')?.touched
              ">
                            Mother's Middle Name is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-4">
                        <label for="MLastName">Last Name</label><br />
                        <input id="MLastName" class="form-control" type="text" formControlName="MLastName" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Mother.MLastName')
                  ?.hasError('required') &&
                admissionForm.get('Mother.MLastName')?.touched
              ">
                            Mother's Last Name is required
                        </div>
                        <br />
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-4">
                        <label for="MEmail">Email</label><br />
                        <input id="MEmail" class="form-control" type="email" formControlName="MEmail" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm.get('Mother.MEmail')?.hasError('required') &&
                admissionForm.get('Mother.MEmail')?.touched
              ">
                            Mother's Email is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-4">
                        <label for="MQualification">Education Qualification</label>
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Mother.MQualification')
                  ?.hasError('required') &&
                admissionForm.get('Mother.MQualification')
                  ?.touched
              ">
                            Mother's Education Qualification is required
                        </div>
                        <br />
                        <input id="MQualification" class="form-control" type="text"
                            formControlName="MQualification" /><br />
                    </div>
                    <div class="col-xl-4">
                        <label for="MProfession">Profession</label><br />
                        <input id="MProfession" class="form-control" type="text" formControlName="MProfession" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Mother.MProfession')
                  ?.hasError('required') &&
                admissionForm.get('Mother.MProfession')?.touched
              ">
                            Mother's Profession is required
                        </div>
                        <br />
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-6">
                        <label for="MDesignation">Designation</label><br />
                        <input id="MDesignation" class="form-control" type="text" formControlName="MDesignation" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm
                  .get('Mother.MDesignation')
                  ?.hasError('required') &&
                admissionForm.get('Mother.MDesignation')?.touched
              ">
                            Mother's Designation is required
                        </div>
                        <br />
                    </div>
                    <div class="col-xl-6">
                        <label for="MPhone">Phone Number</label><br />
                        <input id="MPhone" class="form-control" type="number" formControlName="MPhone" />
                        <div class="alert alert-danger" *ngIf="
                admissionForm.get('Mother.MPhone')?.hasError('required') &&
                admissionForm.get('Mother.MPhone')?.touched
              ">
                            Mother's Phone is required
                        </div>
                        <br />
                    </div>
                </div>
            </div>

            <div formArrayName="EmergancyContactList">
                <h2>Emergency Contact List:</h2>
                <div class="alert alert-danger" *ngIf="
                                admissionForm.get('EmergancyContactList')?.hasError('required') &&
                admissionForm.get('EmergancyContactList')?.touched
              ">
                    Emergency Contact is required
                </div>
                <div class="alert alert-danger" *ngIf="
                                                admissionForm.get('EmergancyContactList')?.hasError('maxlength') &&
                                admissionForm.get('EmergancyContactList')?.touched
                              ">
                    Emergency Contact can not be more than 5
                </div>
                <div *ngFor="let cont of EmergancyContactList.controls; let i = index" class="EmergancyContactList">
                    <div [formGroupName]="i">

                        <h5 class="mt-3">Contact - {{ i + 1 }}</h5>
                        <div class="row">
                            <div class="col-xl-5">
                                <label for="Relation-{{ i }}">Relation</label>
                                <input class="form-control" id="Relation-{{ i }}" type="text"
                                    formControlName="Relation" />
                            </div>
                            <div class="col-xl-5">
                                <label for="Number-{{ i }}">Number</label>
                                <input class="form-control" id="Number-{{ i }}" type="number"
                                    formControlName="Number" />
                            </div>
                            <div class="col-xl-2">
                                <div class="mt-4 mx-5">
                                    <button class="btn btn-danger" type="delete" (click)="deleteContact(i)">
                                        Delete
                                    </button>
                                </div>

                            </div>
                        </div>
                    </div>


                </div>

            </div>
            <div class="content">

                <div class="col-xl-4">
                    <div class=" mt-4">
                        <button class="btn btn-primary" type="delete" (click)="addContact()">
                            Add More Contact
                        </button>
                    </div>

                </div>
            </div>

            <br />
            <div formArrayName="References">
                <h2>Reference List:</h2>
                <div class="alert alert-danger"
                    *ngIf="admissionForm.get('References')?.hasError('required') &&admissionForm.get('References')?.touched">
                    Reference is required
                </div>
                <div class="alert alert-danger"
                    *ngIf="admissionForm.get('References')?.hasError('maxlength') && admissionForm.get('References')?.touched">
                    References can not be more than 5
                </div>
                <div *ngFor="let re of References.controls; let i = index" [formGroupName]="i" class="References">
                    <h5 class="mt-3">Reference - {{ i + 1 }}</h5>
                    <div class="row">
                        <div class="col-xl-3">
                            <label for="ReferenceThrough-{{ i }}">Reference Through</label>
                            <input class="form-control" id="ReferenceThrough-{{ i }}" type="text"
                                formControlName="ReferenceThrough" />
                        </div>
                        <div class="col-xl-4">
                            <label for="RefsNumber-{{ i }}">Number</label>
                            <input class="form-control" id="Number-{{ i }}" type="number"
                                formControlName="RefsNumber" />
                        </div>
                        <div class="col-xl-4">
                            <label for="Address-{{ i }}">Address</label>
                            <input class="form-control" id="Address-{{ i }}" type="text" formControlName="Address" />
                        </div>
                        <div class="col-xl-1">
                            <div class="mt-4 mx-2">
                                <button class="btn btn-danger" type="delete" (click)="deleteReferences(i)">
                                    Delete
                                </button>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
            <div class="content">

                <div class="col-xl-4">
                    <div class=" mt-4">
                        <button class="btn btn-primary" type="delete" (click)="addReferences()">
                            Add More Reference
                        </button>
                    </div>

                </div>
            </div>
            <br />
            <p>Complete the form to enable button</p>
            <button class="btn btn-danger" type="submit" [disabled]="!admissionForm.valid">
                Submit
            </button>
        </form>
    </div>
    <div class="row border" *ngIf="studentDetails.length>0">
        <h2 class="text-center mb-4">Student Data</h2>
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th style="width: 33%" scope="col">Student</th>
                    <th style="width: 33%" scope="col">Father</th>
                    <th style="width: 33%" scope="col">Mother</th>
                    <!-- <th style="width: 20%" scope="col">Emergency Contact</th>
                    <th style="width: 20%" scope="col">References</th> -->
                </tr>
            </thead>
            <tbody *ngFor="let s of studentDetails; let i=index">
                <tr>
                    <td>
                        <table cellpadding="0" cellspacing="0">
                            <tr>
                                <th>
                                    Name
                                </th>
                                <td>
                                    {{s.FirstName + ' ' + s.MiddleName +' ' + s.LastName}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    DOB
                                </th>
                                <td>
                                    {{s.Dob}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    PlaceOfBirth
                                </th>
                                <td>
                                    {{s.Dob}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    FirstLanguage
                                </th>
                                <td>
                                    {{s.FirstLanguage}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Address
                                </th>
                                <td>
                                    {{s.Address.City + ' '+s.Address.State + ' '+s.Address.Country + ' '+s.Address.Pin}}
                                </td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table cellpadding="0" cellspacing="0">
                            <tr>
                                <th>
                                    Name
                                </th>
                                <td>
                                    {{s.Father.FFirstName + ' ' + s.Father.FMiddleName +' ' + s.Father.FLastName}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Email
                                </th>
                                <td>
                                    {{s.Father.FEmail}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Education Qualification
                                </th>
                                <td>
                                    {{s.Father.FQualification}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Profession
                                </th>
                                <td>
                                    {{s.Father.FProfession}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Designation
                                </th>
                                <td>
                                    {{s.Father.FDesignation}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Phone
                                </th>
                                <td>
                                    {{s.Father.FPhone}}
                                </td>
                            </tr>

                        </table>
                    </td>
                    <td>
                        <table cellpadding="0" cellspacing="0">
                            <tr>
                                <th>
                                    Name
                                </th>
                                <td>
                                    {{s.Mother.MFirstName + ' ' + s.Mother.MMiddleName +' ' + s.Mother.MLastName}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Email
                                </th>
                                <td>
                                    {{s.Mother.MEmail}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Education Qualification
                                </th>
                                <td>
                                    {{s.Mother.MQualification}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Profession
                                </th>
                                <td>
                                    {{s.Mother.MProfession}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Designation
                                </th>
                                <td>
                                    {{s.Mother.MDesignation}}
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Phone
                                </th>
                                <td>
                                    {{s.Mother.MPhone}}
                                </td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table cellpadding="0" cellspacing="0">

                            <thead>
                                <tr>
                                    <th>Relation</th>
                                    <th>Number</th>
                                </tr>

                            </thead>
                            <tbody *ngFor="let e of s.EmergancyContactList; let xy=index;">
                                <tr>
                                    <td>{{e.Relation}}</td>
                                    <td> {{e.Number}} </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                    <td>
                        <table cellpadding="0" cellspacing="0">
                            <thead>
                                <tr>
                                    <th>Reference Through</th>
                                    <th>Address</th>
                                    <th>RefsNumber</th>
                                </tr>

                            </thead>
                            <tbody *ngFor="let r of s.References; let yz=index;">
                                <tr>
                                    <td>{{r.ReferenceThrough}}</td>
                                    <td> {{r.Address}} </td>
                                    <td>{{r.RefsNumber}}</td>
                                </tr>
                            </tbody>

                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>